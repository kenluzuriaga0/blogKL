---
import Base from "@/layouts/Base.astro";
import { markdownify } from "@/lib/utils/textConverter";
import type { AboutPage } from "@/types";
import { Image } from "astro:assets";
import { getEntry } from "astro:content";

const { data, render } = await getEntry("about", "-index");
const { Content } = await render();
const { title, image, images, education, experience } = data as AboutPage;
---

<Base {...data}>
  <section class="section mt-1">
    <div class="container text-center">
      <h1
        class="h1 text-left lg:text-[55px] mt-1 mb-4"
        set:html={markdownify(title)}
      />
      {
        image && (
          <div class="mb-8 center-image">
            <Image
              src={image}
              width={360}
              height={316}
              alt={title}
              class="rounded-lg"
              format="webp"
            />
          </div>
        )
      }
      <div class="text-left text-xl">
        <Content />
      </div>

      <div class="row mt-24 text-left lg:flex-nowrap">
        <div class="lg:col-6">
          <div
            class="rounded border border-border p-6 dark:border-darkmode-border"
          >
            <h2
              class="section-title mb-12"
              set:html={markdownify(education.title)}
            />

            <div class="row">
              {
                education.degrees.map((degree, index) => (
                  <div class="mb-7 md:col-6">
                    <h4 class="text-base lg:text-[25px]">
                      {degree.university}
                    </h4>
                    <p class="mt-2">{degree.content}</p>
                  </div>
                ))
              }
            </div>
          </div>
        </div>
        <div class="experience mt-10 lg:mt-0 lg:col-6">
          <div
            class="rounded border border-border p-6 dark:border-darkmode-border"
          >
            <h2
              class="section-title mb-12"
              set:html={markdownify(experience.title)}
            />
            <ul class="row">
              {
                experience?.list?.map((item, index) => (
                  <li class="mb-5 text-lg font-bold text-dark dark:text-darkmode-light lg:col-6">
                    {item}
                  </li>
                ))
              }
            </ul>
          </div>
        </div>
      </div>


      <div class="grid grid-cols-3 gap-4 mt-24">
        {images.map((image) => (
          <a href={image.src} class="col-span-1" data-title={image.alt} data-lightbox="gallery" >
            <img src={image.src} alt={image.alt} class="w-full h-auto rounded image-item" />
          </a>
        ))}
      </div>
    </div>
  </section>

  <style>
  
    
    .image-item {
      width: 100%;
      cursor: pointer;
      border: 2px solid #eee;
      border-radius: 8px;
      transition: transform 0.2s ease;
    }
    
    .image-item:hover {
      transform: scale(1.05);
    }
    </style>
    
</Base>
<!-- Import full-view of images -->
<link href="../../public/vendor/css/lightbox.min.css" rel="stylesheet" />
<script src="../../public/vendor/js/lightbox.min.js" defer></script>
<script src="../../public/vendor/js/lightbox-plus-jquery.min.js"></script>

